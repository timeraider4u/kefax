//----------------------------------------------------------------------
//----------------------------------------------------------------------
package at.jku.weiner.cpreprocess
language cPreprocess
//----------------------------------------------------------------------
split-lexer=true
source file="res/Test0004_SimpleDef.c"
//----------------------------------------------------------------------
lexer-tokens
	HASH DEFINE WS 		ID WS WS 	SPECIAL+*18 NEWLINE
	HASH DEFINE WS		ID WS 		SPECIAL ID SPECIAL NEWLINE
	HASH DEFINE WS		ID WS 		SPECIAL NEWLINE
	NEWLINE
	HASH DEFINE WS		ID WS WS	ID NEWLINE
	NEWLINE
	HASH DEFINE WS		ID WS		ID WS ID LPAREN ID RPAREN NEWLINE
	NEWLINE
	SPECIAL +*2 WS ID SPECIAL WS ID WS ID NEWLINE
	HASH DEFINE WS 		ID WS		ID NEWLINE
	NEWLINE
	ID WS SPECIAL NEWLINE
	WS ID WS ID WS SPECIAL WS ID WS SPECIAL WS ID SPECIAL NEWLINE
	WS ID WS ID SPECIAL NEWLINE
	SPECIAL NEWLINE
//----------------------------------------------------------------------
(Model
	units+=
	(TranslationUnit
		group=
		(GroupOpt
			lines+=
			(PreprocessorDirectives
				directive=
				(DefineDirective
					id++"PI",
					string++"3.1415926535897932"
				)
			),
			(PreprocessorDirectives
				directive=
				(DefineDirective
					id++"NAME",
					string++"\\\"Nobody\\\""
				)
			),
			(PreprocessorDirectives
				directive=
				(DefineDirective
					id++"NUMBER",
					string++"2"
				)
			),
			(NewLineLine),
			(PreprocessorDirectives
				directive=
				(DefineDirective
					id++"X",
					string++"NUMBER"
				)
			),
			(NewLineLine),
			(PreprocessorDirectives
				directive=
				(DefineDirective
					id++"MAIN",
					string++"int main(void)"
				)
			),
			(NewLineLine),
			(Code
				code++"// nasty, but valid"
			),
			(PreprocessorDirectives
				directive=
				(DefineDirective
					id++"long",
					string++"int"
				)
			),
			(NewLineLine),
			(Code
				code++"MAIN {"
			),
			(Code
				code++"	long d = X - NUMBER;"
			),
			(Code
				code++"	return d;"
			),
			(Code
				code++"}"
			)
			
		)
	)
)
//----------------------------------------------------------------------
output file="bin/Test0004_SimpleDef.c.i"
expected file="expected/Test0004_SimpleDef.c"
//replacePatterns file="res/Patterns.txt"
//----------------------------------------------------------------------
//----------------------------------------------------------------------
