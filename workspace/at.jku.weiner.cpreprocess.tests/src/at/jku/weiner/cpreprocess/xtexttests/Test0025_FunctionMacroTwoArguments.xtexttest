//----------------------------------------------------------------------
//----------------------------------------------------------------------
package at.jku.weiner.cpreprocess
language cPreprocess
//----------------------------------------------------------------------
split-lexer=true
source file="res/Test0025_FunctionMacroTwoArguments.c"
//----------------------------------------------------------------------
lexer-tokens
	HASH DEFINE WS ID LPAREN ID COMMA WS ID RPAREN WS
		LPAREN LPAREN ID RPAREN WS SPECIAL WS
		LPAREN ID RPAREN WS SPECIAL WS
		LPAREN ID RPAREN WS SPECIAL WS
		LPAREN ID RPAREN RPAREN 
		NEWLINE
	ID WS ID WS SPECIAL WS ID LPAREN COMMA WS SPECIAL RPAREN SPECIAL NEWLINE
	ID WS ID WS SPECIAL WS ID LPAREN ID COMMA WS RPAREN SPECIAL NEWLINE
	ID WS ID WS SPECIAL WS ID LPAREN COMMA RPAREN SPECIAL NEWLINE
	ID WS ID WS SPECIAL WS ID LPAREN LPAREN COMMA RPAREN COMMA RPAREN SPECIAL NEWLINE
	ID WS ID WS SPECIAL WS ID WS LPAREN ID WS LPAREN ID COMMA WS ID RPAREN 
		COMMA WS ID RPAREN SPECIAL NEWLINE
//----------------------------------------------------------------------
(Model
	units+=
	(TranslationUnit
		group=
		(GroupOpt
			lines+=
			(PreprocessorDirectives
				directive=
				(DefineFunctionLikeMacro
					id++"MIN",
					list=
					(IdentifierList
						id+*"[X, Y]"
					),
					string++"((X) < (Y) ? (X) : (Y))"
				)
			),
			(Code
				code++"int a = MIN(, 5);"
			),
			(Code
				code++"int b = MIN(a, );"
			),
			(Code
				code++"int c = MIN(,);"
			),
			(Code
				code++"int d = MIN((,),);"
			),
			(Code
				code++"int e = MIN (MIN (a, b), c);"
			)
		)
	)
)
//----------------------------------------------------------------------
output file="bin/Test0025_FunctionMacroTwoArguments.c.i"
expected file="expected/Test0025_FunctionMacroTwoArguments.c"
//replacePatterns file="res/Patterns.txt"
//----------------------------------------------------------------------
//----------------------------------------------------------------------
